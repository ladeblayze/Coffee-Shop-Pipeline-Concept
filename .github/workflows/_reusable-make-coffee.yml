name: Reusable - Make Coffee

on:
  workflow_call:  # This workflow can be CALLED by other workflows
    inputs:
      coffee_type:
        description: "Type of coffee to make"
        type: string
        required: true
      
      size:
        description: "Size (small, medium, large)"
        type: string
        required: true
      
      customer_name:
        description: "Customer name"
        type: string
        required: false
        default: "Customer"

jobs:
  make-coffee:
    name: "Make ${{ inputs.size }} ${{ inputs.coffee_type }}"
    runs-on: ubuntu-latest
    steps:
      - name: Take order
        run: |
          echo "ğŸ“ Order received!"
          echo "Customer: ${{ inputs.customer_name }}"
          echo "Drink: ${{ inputs.size }} ${{ inputs.coffee_type }}"
      
      - name: Grind beans
        run: |
          echo "ğŸ”§ Grinding fresh beans..."
          sleep 1
          echo "âœ… Beans ground!"
      
      - name: Brew coffee
        run: |
          echo "â˜• Brewing ${{ inputs.coffee_type }}..."
          
          # Different drinks take different times
          if [ "${{ inputs.coffee_type }}" == "espresso" ]; then
            echo "âš¡ Quick espresso shot - 15 seconds"
            sleep 1
          elif [ "${{ inputs.coffee_type }}" == "latte" ]; then
            echo "ğŸ¥› Brewing espresso and steaming milk - 45 seconds"
            sleep 2
          else
            echo "â˜• Brewing - 30 seconds"
            sleep 1
          fi
          
          echo "âœ… Brewing complete!"
      
      - name: Prepare drink
        run: |
          echo "ğŸ¨ Finalizing drink..."
          
          if [ "${{ inputs.coffee_type }}" == "latte" ]; then
            echo "ğŸ¨ Creating latte art..."
          fi
          
          echo "âœ… Drink is ready!"
      
      - name: Serve
        run: |
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "âœ… ORDER COMPLETE"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "Customer: ${{ inputs.customer_name }}"
          echo "Drink: ${{ inputs.size }} ${{ inputs.coffee_type }}"
          echo "Status: Ready for pickup!"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
